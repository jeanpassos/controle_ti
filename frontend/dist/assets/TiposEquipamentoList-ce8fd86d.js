import{r as o,f as k,R as e,g as N,h as w,i as C,d as q,j as T,Q as c}from"./index-cd4ade62.js";import{u as L,a as F,t as x}from"./tipoEquipamentoService-ebc579a5.js";function z(){const[r,u]=o.useState(""),[g,s]=o.useState(!1),[a,p]=o.useState(null),y=k(),{data:n,isLoading:E,isError:f}=L("tiposEquipamento",x.listarTodos,{staleTime:1e3*60*5,retry:2}),l=F(t=>x.remover(t),{onSuccess:()=>{y.invalidateQueries("tiposEquipamento"),c.success("Tipo de equipamento removido com sucesso!"),s(!1)},onError:t=>{var d,m;c.error(`Erro ao remover: ${((m=(d=t.response)==null?void 0:d.data)==null?void 0:m.message)||"Erro desconhecido"}`)}}),i=e.useMemo(()=>n?n.filter(t=>t.nome.toLowerCase().includes(r.toLowerCase())||t.descricao&&t.descricao.toLowerCase().includes(r.toLowerCase())):[],[n,r]),b=t=>{p(t),s(!0)},h=()=>{a&&l.mutate(a.id)},v=t=>{u(t.target.value)};return E?e.createElement(N,null):f?e.createElement("div",{className:"p-4 text-center text-red-600"},"Erro ao carregar tipos de equipamento. Tente novamente mais tarde."):e.createElement("div",{className:"container mx-auto px-4 py-6"},e.createElement("div",{className:"flex justify-between items-center mb-6"},e.createElement("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white"},"Tipos de Equipamento"),e.createElement("button",{className:"bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-md flex items-center gap-2 transition",onClick:()=>window.location.href="/tipos-equipamento/novo"},e.createElement(w,null),"Novo Tipo")),e.createElement("div",{className:"mb-4 relative"},e.createElement("div",{className:"flex items-center border border-gray-300 dark:border-gray-700 rounded-lg overflow-hidden"},e.createElement("div",{className:"pl-3 pr-1 text-gray-500 dark:text-gray-400"},e.createElement(C,{size:18})),e.createElement("input",{type:"text",placeholder:"Filtrar tipos de equipamento...",className:"py-2 px-2 w-full outline-none bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300",value:r,onChange:v}))),i.length>0?e.createElement("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden"},e.createElement("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},e.createElement("thead",{className:"bg-gray-50 dark:bg-gray-700"},e.createElement("tr",null,e.createElement("th",{className:"py-3 px-4 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"Nome"),e.createElement("th",{className:"py-3 px-4 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"Descrição"),e.createElement("th",{className:"py-3 px-4 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"Status"),e.createElement("th",{className:"py-3 px-4 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"Ações"))),e.createElement("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},i.map(t=>e.createElement("tr",{key:t.id,className:"hover:bg-gray-50 dark:hover:bg-gray-700"},e.createElement("td",{className:"py-3 px-4 whitespace-nowrap"},e.createElement("div",{className:"flex items-center"},t.icone&&e.createElement("span",{className:"mr-2",style:{color:t.cor||"currentColor"}},t.icone),e.createElement("span",{className:"font-medium text-gray-900 dark:text-white"},t.nome))),e.createElement("td",{className:"py-3 px-4 text-sm text-gray-500 dark:text-gray-400 max-w-xs truncate"},t.descricao||"-"),e.createElement("td",{className:"py-3 px-4"},t.ativo?e.createElement("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100"},"Ativo"):e.createElement("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800 dark:bg-red-800 dark:text-red-100"},"Inativo")),e.createElement("td",{className:"py-3 px-4 text-right text-sm font-medium"},e.createElement("div",{className:"flex justify-end space-x-2"},e.createElement("button",{className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",onClick:()=>window.location.href=`/tipos-equipamento/editar/${t.id}`},e.createElement(q,{size:18})),e.createElement("button",{className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300",onClick:()=>b(t)},e.createElement(T,{size:18}))))))))):e.createElement("div",{className:"text-center py-8 bg-white dark:bg-gray-800 rounded-lg shadow"},e.createElement("p",{className:"text-gray-600 dark:text-gray-400"},r?"Nenhum tipo de equipamento corresponde ao filtro.":"Nenhum tipo de equipamento cadastrado.")),g&&e.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},e.createElement("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-xl max-w-md w-full"},e.createElement("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4"},"Confirmar exclusão"),e.createElement("p",{className:"text-gray-600 dark:text-gray-400 mb-6"},"Tem certeza que deseja excluir o tipo de equipamento ",e.createElement("strong",null,a==null?void 0:a.nome),"?",(a==null?void 0:a.ativo)&&e.createElement("span",{className:"block mt-2 text-yellow-600 dark:text-yellow-400"},"Atenção: Caso haja equipamentos vinculados, este tipo será apenas desativado.")),e.createElement("div",{className:"flex justify-end space-x-3"},e.createElement("button",{className:"px-4 py-2 text-gray-700 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600 rounded",onClick:()=>s(!1)},"Cancelar"),e.createElement("button",{className:"px-4 py-2 bg-red-600 text-white hover:bg-red-700 rounded",onClick:h,disabled:l.isLoading},l.isLoading?"Removendo...":"Confirmar Exclusão")))))}export{z as default};
